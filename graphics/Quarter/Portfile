# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

PortGroup           active_variants 1.1
PortGroup           cmake 1.1
PortGroup           github 1.0

# tag_prefix will be changed to v starting with version 1.1.1
github.setup        coin3d quarter 1.1.0 Quarter-
github.tarball_from releases
name                Quarter

categories          graphics devel
platforms           darwin
revision            0
maintainers         nomaintainer
license             BSD
description         integrates Coin and Qt

long_description    Quarter is a light-weight glue library that provides \
                    seamless integration between Kongsberg SIM's Coin \
                    high-level 3D visualization library and Nokia's Qt 2D \
                    user interface library.

homepage            https://coin3d.github.io

distname            quarter-${version}-src
distfiles           quarter-${version}-src${extract.suffix}

checksums           rmd160  a81b269ac0cb7c0c9e8b27659744d854b81ccf4d \
                    sha256  d055d6c2af199f0cad592d24649f1d7acf842c88741ff74a6f7ff37675a9dd01 \
                    size    724762

depends_lib-append  port:Coin

patchfiles          0001-cpack.d-is-now-optional.patch \
                    0002-remove-QT_VERSION_CHECK.patch

configure.args-append   -DCMAKE_VERBOSE_MAKEFILE=ON \
                        -DQUARTER_BUILD_PLUGIN=ON \
                        -DQUARTER_BUILD_EXAMPLES=OFF

#variant manpages description {Include API documentation in manpages.} {
#    depends_build-append    port:doxygen
#    configure.args-append   -DQUARTER_BUILD_DOCUMENTATION=ON \
#                            -DQUARTER_BUILD_DOC_MAN=ON
#}

variant qt4 conflicts qt5 qt6 description {Enable Qt4 support.} {
    PortGroup               qt4 1.0
    depends_build-append    port:qt4-mac
    configure.args-append   -DQUARTER_USE_QT5=OFF \
                            -DQUARTER_USE_QT6=OFF
}

variant qt5 conflicts qt4 qt6 description {Enable Qt5 support.} {
    PortGroup               qt5 1.0
    depends_build-append    port:qt5
    configure.args-append   -DQUARTER_USE_QT6=OFF
}

variant qt6 conflicts qt4 qt5 description {Enable Qt6 support.} {
    PortGroup               qt6 1.0
    depends_build-append    port:qt6
    configure.args-append   -DQUARTER_USE_QT5=OFF
}

variant qtdesignerplugin description {Build Quarter plugin for Qt Designer.} {
    configure.args-replace  -DQUARTER_BUILD_PLUGIN=OFF -DQUARTER_BUILD_PLUGIN=ON
    configure.args-append   -DCMAKE_INSTALL_QTPLUGINSDIR=${qt_plugins_dir}
}

if {![variant_isset qt5] && ![variant_isset qt6]} {
    default_variants    +qt4
}

github.livecheck.regex  {([0-9.]+)}
