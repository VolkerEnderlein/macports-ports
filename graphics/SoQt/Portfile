# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

PortGroup           active_variants 1.1
PortGroup           cmake 1.1
PortGroup           github 1.0

# tag_prefix will be changed to v starting with version 1.6.1
github.setup        coin3d soqt 1.6.0 SoQt-
github.tarball_from releases
name                SoQt

revision            0
categories          graphics devel
platforms           darwin
maintainers         {gmail.com:mark.brethen @mbrethen} openmaintainer
license             BSD
description         SoQt is a Qt GUI component toolkit library for Coin.
conflicts           SoQt-framework

long_description    ${description}

homepage            https://coin3d.github.io

distname            soqt-${version}-src
distfiles           soqt-${version}-src${extract.suffix}

checksums           rmd160  7d70c8de03f94bdf26f861f92ec3e8017bec25e3 \
                    sha256  9f535af59f07c907022815679681bd345c9dec2f408c74833f6b1b24bca40e1f \
                    size    1675532

depends_lib-append  port:Coin

configure.args-append   -DSOQT_BUILD_EXAMPLES=OFF

subport SoQt-framework {
    conflicts   SoQt
    revision    0

    depends_lib-replace     port:Coin port:Coin-framework
    configure.args-append   -DSOQT_BUILD_MAC_FRAMEWORK=ON \
                            -DCMAKE_INSTALL_PREFIX=${frameworks_dir}
}

variant manpages description {Include API documentation in manpages.} {
    depends_build-append    port:doxygen
    configure.args-append   -DSOQT_BUILD_DOCUMENTATION=ON \
                            -DSOQT_BUILD_MAN_DOCUMENTATION=ON
}

variant qt4 description {Enable Qt4 support.} conflicts qt5 qt6 {
    PortGroup               qt4 1.0
    depends_build-append    port:qt4-mac
    configure.args-append   -DSOQT_USE_QT5=OFF \
                            -DSOQT_USE_QT6=OFF
}

variant qt5 description {Enable Qt5 support.} conflicts qt4 qt6 {
    PortGroup               qt5 1.0
    depends_build-append    port:qt5
    configure.args-append   -DSOQT_USE_QT6=OFF
}

variant qt6 description {Enable Qt6 support.} conflicts qt4 qt5 {
    PortGroup               qt6 1.0
    depends_build-append    port:qt6
    configure.args-append   -DSOQT_USE_QT5=OFF
}

if {![variant_isset qt5] && ![variant_isset qt6]} {
    default_variants    +qt4
}

github.livecheck.regex  {([0-9.]+)}
